![](Pasted%20image%2020240423222121.png)
Who is responsible for saving register values, ensuring no loss when used by callee
- Caller-saved is simple but ineffective if not all registers are required below
- Callee is mostly better. #x86-64 uses hybrid approach
![](Pasted%20image%2020240425123212.png)
![](Pasted%20image%2020240425123158.png)
#### Look up solution. It is weirdly arbitrary and not what happens in reality
###### It is not smart, and doesn't try to save space
- return address *magical place* - 8b
- callee save x,y,f - $3*4b$
$8+3*4=20b$

- parameters a,b - 8b
- return address `main` line 4 - 8b
- callee save register used for a,b,g - 3\*4b
$8+8+3*4=28b$

- parameters a,b - 8b
- return address foo1 - 8b
- callee save registers for r,s,i - 3\*4b
$8+8+3*4=28b$
![](Pasted%20image%2020240606112128.png)
![](Pasted%20image%2020240425123221.png)
$main$
- Return value - 4
- return address - 8
- 1 local variable H - 1 \* 4
- Space for all registers - 16b
$4+8+3*4=24$

$foo2$
- remaining - 4
- first - 4
- return addr - 8
- 1 variable - 1\*4

$bar$
- remaining - 4
- first - 4
- return addr - 8
- 3 variables - 3\*4
![](Pasted%20image%2020240606112058.png)
![](Pasted%20image%2020240425123229.png)
Med en framepointer kan parametre lægges på stacken så snart de er evalueret, hvilket kan lægges lige efter frame pointeren, da det er der den nuværende frame stopper. Den
![](Pasted%20image%2020240425123242.png)
Det er noget rod hvis x bruges andre steder. Er den void kan man godt, for så virker $f$ udelukkende med sideeffekter, som stadig sker.